# π€ GovChat - μ •λ¶€μ§€μ›μ‚¬μ—… λ§μ¶¤ λ§¤μΉ­ μ±—λ΄‡

**λ°°ν¬ μ™„λ£!** μ •λ¶€ μ¬μ • μ§€μ›μ‚¬μ—… μ •λ³΄λ¥Ό AIλ΅ λ§μ¶¤ λ§¤μΉ­ν•΄μ£Όλ” μ„λ²„λ¦¬μ¤ μ±—λ΄‡ μ‹μ¤ν…

## π‰ λ°°ν¬ ν„ν™© (2025-01-14)

### β… λ°°ν¬ μ™„λ£
- **AWS μ¤νƒ**: 3κ° μ¤νƒ μ™„μ „ λ°°ν¬
- **Lambda ν•¨μ**: 8κ° ν•¨μ μ •μƒ λ™μ‘ β…
- **API μ—”λ“ν¬μΈνΈ**: https://x94nllzgi0.execute-api.us-east-1.amazonaws.com/prod/
- **OpenSearch**: https://xv4xqd9c2ttr1a9vl23k.us-east-1.aoss.amazonaws.com
- **ν—¬μ¤μ²΄ν¬**: λ¨λ“  μ—”λ“ν¬μΈνΈ μ •μƒ β…

### β… λ””λ²„κΉ… μ™„λ£
- **SearchLambda Import μ¤λ¥** β†’ ν•΄κ²° μ™„λ£
- **ExternalSyncLambda requests μ¤λ¥** β†’ ν•΄κ²° μ™„λ£
- **ChatbotLambda μ‘λ‹µ ν•μ‹** β†’ ν•΄κ²° μ™„λ£
- **ν…μ¤νΈ μ‹¤ν¨** β†’ ν•΄κ²° μ™„λ£
- **lambda_handler λ―Έμ •μ** β†’ ν•΄κ²° μ™„λ£

## π—οΈ μ£Όμ” κΈ°λ¥

### λ³΄μ• κ°•ν™”
- **IAM μµμ†κ¶ν• μ›μΉ™**: ν•¨μλ³„ μ„Έλ¶„ν™”λ κ¶ν• μ„¤μ •
- **KMS μ•”νΈν™”**: μ „μ© KMS ν‚¤λ΅ DynamoDB, S3 μ•”νΈν™”
- **μ΅°κ±΄λ¶€ μ •μ±…**: VPC, κ³„μ • κΈ°λ° μ ‘κ·Ό μ μ–΄
- **λ³΄μ• μ¤μΊ”**: Bandit SAST, Safety μ·¨μ•½μ  κ²€μ‚¬ μλ™ν™”

### κ΄€μΈ΅μ„± κ°•ν™”
- **Composite Alarm**: μ—λ¬μ¨ + μ§€μ—°μ‹κ°„ κ²°ν•© μ•λ
- **X-Ray μ¶”μ **: λ¶„μ‚° μ¶”μ μΌλ΅ μ„±λ¥ λ³‘λ© μ‹λ³„
- **μ‚¬μ „ μ •μ λ΅κ·Έκ·Έλ£Ή**: κ¶ν• μµμ†ν™” λ° λΉ„μ© μμΈ΅μ„±
- **μΊμ‹ ν¨μ¨μ„± λ©”νΈλ¦­**: μ‹¤μ‹κ°„ ννΈμ¨ λ¨λ‹ν„°λ§

### μ„±λ¥ μµμ ν™”
- **μ •μ±… μΊμ‹± κ°μ„ **: νν‹°μ… ν‚¤ μ λ¦Ό λ°©μ§€, μ΄μ¤‘ λ§λ£ ν•„λ“
- **λ©”νΈλ¦­ λ°°μΉ μ „μ†΅**: EMF κΈ°λ° ν¨μ¨μ  λ©”νΈλ¦­ μμ§‘
- **λ™μ‹ μ‹¤ν–‰ μ ν•**: Lambda ν•¨μλ³„ μ μ • λ™μ‹μ„± μ„¤μ •
- **λ©”λ¨λ¦¬ μµμ ν™”**: ν•¨μλ³„ λ§μ¶¤ λ©”λ¨λ¦¬ ν• λ‹Ή

### μ΄μ μ¤€λΉ„λ„
- **ν¬κ΄„μ  Runbook**: μ•λ λ€μ‘, μ¥μ•  λ³µκµ¬ μ μ°¨
- **Chaos ν…μ¤νΈ**: μ¤λ΅ν‹€λ§, νƒ€μ„μ•„μ›ƒ, Cold Start λ³µμ›λ ¥ κ²€μ¦
- **λ¶€ν• ν…μ¤νΈ**: RPS μ μ–΄, λ™μ‹μ„±, ν•κ³„μ  νƒμƒ‰
- **μ»¤λ²„λ¦¬μ§€ μΈ΅μ •**: 80% μµμ† μ»¤λ²„λ¦¬μ§€ μ”κµ¬μ‚¬ν•­

## π“ ν„μ¬ μƒνƒ

| κµ¬μ„±μ”μ† | μƒνƒ | λΉ„κ³  |
|----------|------|------|
| μΈν”„λΌ λ°°ν¬ | β… μ™„λ£ | 3κ° μ¤νƒ λ°°ν¬ μ™„λ£ |
| Lambda ν•¨μ | β… μ •μƒ | 8κ° ν•¨μ μ •μƒ λ™μ‘ |
| API Gateway | β… μ •μƒ | λ¨λ“  μ—”λ“ν¬μΈνΈ μ •μƒ |
| DynamoDB | β… μ •μƒ | 5κ° ν…μ΄λΈ” μ΄μ μ¤‘ |
| OpenSearch | β οΈ λ¶€λ¶„ | μ»¬λ ‰μ… μƒμ„±, μΈλ±μ‹± λ―Έμ™„μ„± |
| μ™Έλ¶€ API μ—°λ™ | β λ―Έμ™„μ„± | κ³µκ³µλ°μ΄ν„° ν¬ν„Έ μ—°λ™ ν•„μ” |

## π—οΈ μ•„ν‚¤ν…μ²

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ Full Stack β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚                                                   β”‚
β”‚  Frontend (Next.js)                               β”‚
β”‚  β”β”€β”€ /user/chat     β†’ μ‚¬μ©μ μ±„ν… μΈν„°νμ΄μ¤        β”‚
β”‚  β””β”€β”€ /admin/policies β†’ κ΄€λ¦¬μ μ •μ±… κ΄€λ¦¬             β”‚
β”‚                                                   β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ AWS VPC β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚  β”‚                                             β”‚ β”‚
β”‚  β”‚  API Gateway (REST + CORS)                  β”‚ β”‚
β”‚  β”‚  β”β”€β”€ /chat      β†’ ChatbotLambda (512MB)    β”‚ β”‚
β”‚  β”‚  β”β”€β”€ /search    β†’ SearchLambda (256MB)     β”‚ β”‚
β”‚  β”‚  β”β”€β”€ /match     β†’ MatchLambda (256MB)      β”‚ β”‚
β”‚  β”‚  β””β”€β”€ /extract   β†’ ExtractLambda (256MB)    β”‚ β”‚
β”‚                                               β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ λ³΄μ• κ³„μΈµ β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚  β”‚ β€Ά KMS ν‚¤ (μλ™ λ΅ν…μ΄μ…)                   β”‚ β”‚
β”‚  β”‚ β€Ά IAM μµμ†κ¶ν• (μ΅°κ±΄λ¶€ μ •μ±…)               β”‚ β”‚
β”‚  β”‚ β€Ά VPC μ—”λ“ν¬μΈνΈ (OpenSearch)             β”‚ β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚                                               β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ λ°μ΄ν„° κ³„μΈµ β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚  β”‚ DynamoDB (KMS μ•”νΈν™”, TTL, λ°±μ—…)          β”‚ β”‚
β”‚  β”‚ OpenSearch Serverless (λ²΅ν„° κ²€μƒ‰)         β”‚ β”‚
β”‚  β”‚ S3 (KMS μ•”νΈν™”, λ²„μ „ κ΄€λ¦¬)                β”‚ β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚                                               β”‚
β”‚  β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€ κ΄€μΈ΅μ„± κ³„μΈµ β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β”‚  β”‚ β€Ά CloudWatch λ€μ‹λ³΄λ“                     β”‚ β”‚
β”‚  β”‚ β€Ά Composite Alarms                       β”‚ β”‚
β”‚  β”‚ β€Ά X-Ray λ¶„μ‚° μ¶”μ                         β”‚ β”‚
β”‚  β”‚ β€Ά EMF λ©”νΈλ¦­ μμ§‘                        β”‚ β”‚
β”‚  β”‚ β€Ά SNS μ•λ ν† ν”½                          β”‚ β”‚
β”‚  β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β” β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

## π› οΈ μ„¤μΉ λ° λ°°ν¬

### μ‚¬μ „ μ”κµ¬μ‚¬ν•­
```bash
# Python 3.12+
python --version

# Node.js 18+
node --version
npm --version

# AWS CDK v2
npm install -g aws-cdk
cdk --version

# κ°λ° λ„κµ¬
pip install bandit pytest-cov safety ruff mypy
```

### π― λ‹¤μ μ‘μ—… (μ°μ„ μμ„)

#### π¨ κΈ΄κΈ‰ (μ¦‰μ‹ ν•„μ”)
1. **μ™Έλ¶€ κ³µκ³µλ°μ΄ν„° API μ—°λ™** - ν•µμ‹¬ κΈ°λ¥
2. **OpenSearch λ²΅ν„° κ²€μƒ‰ μ™„μ„±** - "μ›μ„μΉ" μ‹μ¤ν…

#### β οΈ μ¤‘μ” (λ‹¨κΈ° λ©ν‘)
3. **μ‹¤λ… μΈμ¦ μ‹μ¤ν…** - λ³΄μ• κ°•ν™”
4. **κ΄€λ¦¬μ λ€μ‹λ³΄λ“ μ™„μ„±** - μ΄μ λ„κµ¬
5. **μ„±λ¥ μµμ ν™”** - μ‚¬μ©μ κ²½ν—

### π› οΈ κ°λ° ν™κ²½ μ„¤μ •

#### λ°±μ—”λ“ (μ΄λ―Έ λ°°ν¬λ¨)
```bash
# ν„μ¬ λ°°ν¬λ μƒνƒ ν™•μΈ
aws cloudformation describe-stacks --stack-name GovChatStack

# ν—¬μ¤μ²΄ν¬
curl https://x94nllzgi0.execute-api.us-east-1.amazonaws.com/prod/question
```

#### ν”„λ΅ νΈμ—”λ“ κ°λ°
```bash
cd frontend
npm install
npm run dev  # http://localhost:3000
```

## π§ API ν…μ¤νΈ

### ν„μ¬ λ™μ‘ν•λ” μ—”λ“ν¬μΈνΈ
```bash
# μ§λ¬Έ μ²λ¦¬ (μ •μƒ)
curl -X POST https://x94nllzgi0.execute-api.us-east-1.amazonaws.com/prod/question \
  -H "Content-Type: application/json" \
  -d '{"message": "μ°½μ—… μ§€μ› μ‚¬μ—… μ°Ύκ³  μμ–΄μ”"}'

# κ²€μƒ‰ (μ •μƒ)
curl https://x94nllzgi0.execute-api.us-east-1.amazonaws.com/prod/search?q=μ°½μ—…

# λ°μ΄ν„° μ¶”μ¶ (μ •μƒ)
curl -X POST https://x94nllzgi0.execute-api.us-east-1.amazonaws.com/prod/extract \
  -H "Content-Type: application/json" \
  -d '{"text": "λ§ 39μ„Έ μ΄ν• μ²­λ…„ μ°½μ—…μ μ§€μ›μ‚¬μ—…"}'

# λ§¤μΉ­ (μ •μƒ)
curl -X POST https://x94nllzgi0.execute-api.us-east-1.amazonaws.com/prod/match \
  -H "Content-Type: application/json" \
  -d '{"userProfile": {"age": 30}, "query": "μ°½μ—…μ§€μ›"}'
```

## π“ ν„μ¬ λ°°ν¬λ λ¦¬μ†μ¤

### AWS λ¦¬μ†μ¤ ν„ν™©
- **Lambda ν•¨μ**: 8κ° (Python 3.12)
- **DynamoDB ν…μ΄λΈ”**: 5κ° (KMS μ•”νΈν™”)
- **S3 λ²„ν‚·**: 1κ° (λ°μ΄ν„° μ €μ¥)
- **OpenSearch μ»¬λ ‰μ…**: 1κ° (λ²΅ν„° κ²€μƒ‰)
- **API Gateway**: 1κ° (REST API)
- **CloudWatch**: λ€μ‹λ³΄λ“ & μ•λ

### λ΅κ·Έ ν™•μΈ
```bash
# Lambda ν•¨μ λ΅κ·Έ ν™•μΈ
aws logs describe-log-groups --log-group-name-prefix "/aws/lambda/GovChat"

# μµκ·Ό μ—λ¬ λ΅κ·Έ
aws logs filter-log-events \
  --log-group-name "/aws/lambda/GovChat-SearchLambda" \
  --filter-pattern "ERROR"
```

## π”§ κ°λ° μ‘μ—…

### μ™Έλ¶€ API μ—°λ™ κµ¬ν„
```bash
# κ³µκ³µλ°μ΄ν„° ν¬ν„Έ API ν‚¤ μ„¤μ •
# API ν‚¤: 0259O7/...== (ν™κ²½λ³€μ μ„¤μ • ν•„μ”)

# κµ¬ν„ μ„μΉ
# infra/src/functions/external_data_sync_handler.py
```

## π“ ν—¬μ¤μ²΄ν¬ κ²°κ³Ό

### ν„μ¬ μƒνƒ (2025-01-14)
| μ—”λ“ν¬μΈνΈ | μƒνƒ | μ‘λ‹µμ‹κ°„ | λΉ„κ³  |
|-----------|------|----------|------|
| /question | β… OK | 0.69s | μ •μƒ λ™μ‘ |
| /search | β… OK | 0.046s | **λ””λ²„κΉ… μ™„λ£** |
| /extract | β… OK | 1.12s | μ •μƒ λ™μ‘ |
| /match | β… OK | 0.68s | μ •μƒ λ™μ‘ |

## π”’ λ³΄μ• μ„¤μ •

### ν„μ¬ μ μ©λ λ³΄μ•
- **KMS μ•”νΈν™”**: DynamoDB, S3 λ°μ΄ν„° μ•”νΈν™”
- **HTTPS**: λ¨λ“  API ν†µμ‹  μ•”νΈν™”
- **IAM μµμ†κ¶ν•**: Lambda ν•¨μλ³„ μ„Έλ¶„ν™”λ κ¶ν•
- **JWT μΈμ¦**: μ‚¬μ©μ μ„Έμ… κ΄€λ¦¬

### κ΄€λ¦¬μ κ³„μ •
- **μ΄λ©”μΌ**: archt723@gmail.com
- **λΉ„λ°€λ²νΈ**: 1q2w3e2w1q! (λ³€κ²½ κ¶μ¥)
- **κ¶ν•**: μ „μ²΄ μ‹μ¤ν… κ΄€λ¦¬

## π”„ Git κ΄€λ¦¬

### ν„μ¬ μƒνƒ
- β… **λ¨λ“  λ³€κ²½μ‚¬ν•­ μ»¤λ°‹ μ™„λ£**
- β… **μ›κ²© μ €μ¥μ† ν‘Έμ‹ μ™„λ£**
- β… **λ””λ²„κΉ… μ΄μ ν•΄κ²° μ™„λ£**

### λΈλμΉ μ „λµ
- **main**: ν”„λ΅λ•μ… λ°°ν¬ μ™„λ£ μƒνƒ
- **develop**: κ°λ° μ§„ν–‰ μ¤‘
- **feature/***: κΈ°λ¥λ³„ κ°λ° λΈλμΉ

## π“ λ¬Έμ„

- **[μ•„ν‚¤ν…μ² κ°μ”](ARCHITECTURE_OVERVIEW.md)** - μ‹μ¤ν… μ „μ²΄ κµ¬μ΅°
- **[AWS λ°°ν¬ ν„ν™©](AWS_DEPLOYMENT_STATUS.md)** - μƒμ„Έ λ°°ν¬ μ •λ³΄
- **[λ””λ ‰ν† λ¦¬ κµ¬μ΅°](DIRECTORY_STRUCTURE.md)** - ν”„λ΅μ νΈ κµ¬μ΅°
- **[μ½”λ“ λ¦¬λ·°](docs/CODE_REVIEW.md)** - κ°λ° κ°€μ΄λ“
- **[λ””λ²„κΉ… κ°€μ΄λ“](docs/DEBUGGING_GUIDE.md)** - λ””λ²„κΉ… μ™„λ£ μƒνƒ
- **[μ΄μ κ°€μ΄λ“](docs/runbook.md)** - μ΄μ μ μ°¨
- **[λ΅κ·Έ μΏΌλ¦¬](docs/log-queries.md)** - λ¨λ‹ν„°λ§ μΏΌλ¦¬

## π― ν”„λ΅μ νΈ λ©ν‘

**GovChat**μ€ μ •λ¶€ μ¬μ • μ§€μ›μ‚¬μ—… μ •λ³΄λ¥Ό AIλ΅ λ¶„μ„ν•μ—¬ μ‚¬μ©μμ—κ² λ§μ¶¤ λ§¤μΉ­ν•΄μ£Όλ” μ„λΉ„μ¤μ…λ‹λ‹¤.

### ν•µμ‹¬ κΈ°λ¥
1. **ν†µν•© λ°μ΄ν„° μμ§‘**: κ³µκ³µλ°μ΄ν„° ν¬ν„Έ API μ—°λ™
2. **AI μ΅°κ±΄ μ¶”λ΅ **: λ€ν™”μ—μ„ λ§¤μΉ­ μ΅°κ±΄ μλ™ μ¶”μ¶
3. **μ›μ„μΉ μ‹μ¤ν…**: OpenSearch κΈ°λ° ν†µν•© κ²€μƒ‰
4. **μ μ§„μ  ν”„λ΅ν•„**: λ€ν™” κΈ°λ° μ‚¬μ©μ ν”„λ΅ν•„ μ™„μ„±

### κΈ°μ  μ¤νƒ
- **Frontend**: Next.js + TypeScript + Tailwind CSS
- **Backend**: AWS Lambda + Python 3.12
- **Database**: DynamoDB + OpenSearch Serverless
- **AI**: GPT-4 Mini + OpenAI Embeddings
- **Infrastructure**: AWS CDK + CloudFormation

---

**λ°°ν¬ μƒνƒ**: β… ν”„λ΅λ•μ… λ°°ν¬ μ™„λ£  
**λ””λ²„κΉ… μƒνƒ**: β… μ£Όμ” μ΄μ ν•΄κ²° μ™„λ£  
**λ‹¤μ μ‘μ—…**: μ™Έλ¶€ API μ—°λ™  
**μµμΆ… μ—…λ°μ΄νΈ**: 2025-01-14